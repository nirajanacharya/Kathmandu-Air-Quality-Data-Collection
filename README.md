# Kathmandu Air Quality Data Collection

Automated pipeline to fetch and process air quality data for Kathmandu, Nepal from OpenAQ API.


## Setup

1. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

2. Create a `.env` file in the project root:
   ```
   OPENAQ_API_KEY=your_api_key_here
   ```

3. Get your free API key from [OpenAQ](https://explore.openaq.org/#1.2/20/40)

## Usage

### Run the complete pipeline:
```bash
python main.py
```

This will:
- Find all monitoring stations near Kathmandu
- Fetch air quality measurements (PM2.5, PM10, O3)
- Save raw data to `data/raw/raw_pollutant_data.csv`
- Process and save to `data/processed/final_timeseries_data.csv`

### Analyze data with Jupyter:
```bash
jupyter notebook analyze_data.ipynb
```

The notebook includes:
- Data loading and overview
- Data quality checks and cleaning
- Statistical summaries
- Time series visualizations
- Distribution analysis
- Location-based analysis

## Configuration

Edit `config.py` to adjust:
- Date range (DATE_FROM, DATE_TO)
- Location coordinates (LATITUDE, LONGITUDE)
- Search radius (RADIUS in meters)
- Parameters to fetch (PARAMETERS: pm25, pm10, o3, etc.)
- API request limits (LIMIT, max pages)

## Data Output

**Raw Data**: `data/raw/raw_pollutant_data.csv`
- All measurements with full metadata
- Includes sensor info, locations, timestamps

**Processed Data**: `data/processed/final_timeseries_data.csv`
- Time-series format with datetime index
- Parameters as columns (PM2.5, PM10, O3)
- Cleaned and aggregated data

**Daily Averages**: `data/processed/daily_averages.csv`
- Daily mean values for each parameter
- Generated by analysis notebook

## API Information

This project uses OpenAQ API v3 with coordinate-based location search:
- Endpoint: https://api.openaq.org/v3
- Authentication: API key required (free tier available)
- Rate limits: Managed with pagination
- Documentation: https://docs.openaq.org

## Notes

- Data is fetched for a 25km radius around Kathmandu center (27.7172°N, 85.3240°E)
- Invalid measurements (negative values, error codes) are filtered during analysis
- The notebook includes comprehensive data quality checks
